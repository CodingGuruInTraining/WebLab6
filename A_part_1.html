<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mark's To-Do List</title>
    <link rel="stylesheet" type="text/css" href="lab6styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>

<script>
    $(function() {
// Adds initial elements to the body.
        $("body").append("<input type='text' id='inputbox'>" + "<br><br>");
        $("body").append("<button id='myButton'>Press Me</button>");
        $("body").append("<button id='clearButton'>Clear</button>");
        $("body").append("<ul id='myList'></ul>");
        $("body").append("<table id='myTable'><tr><th scope='col'>Item</th><th scope='col'>Date</th></tr></table>");



// Button click event listener.
        $("#myButton").click(function(){
            var input = $("#inputbox").val();
            if (input != "") {
                $("#myList").append("<li class='not_done'>" + input + "</li>");
                $("#inputbox").val("");
            }
        });



// Clear click event listener.
        $("#clearButton").click(function(){
            var items = $(".complete");
            for (var x = 0; x < items.length; x++) {
                var rawDate = $(items[x]).data('date');
                var doneDate = ("0" + (rawDate.getMonth()+1)).slice(-2) + "/" + ("0" + rawDate.getDate()).slice(-2) + "/" + rawDate.getFullYear();
//                items[x].fadeOut();
//                $(this).fadeOut();
                $(".complete").fadeOut('slow');
                setTimeout(function() {
                $("#myTable").append("<tr><td>" + items[x].innerHTML + "</td><td>" + doneDate + "</td></tr>");
//                $(".complete").fadeOut();
                //                $(".complete").fadeout(); //.remove();
            }, 1000)
            }
        });


// List click event listener.
        $("#myList").click(function(event){
            var whatEvent = event.target;
            $(whatEvent).toggleClass("complete");
            if (!$(whatEvent).data("date")) {
                $(whatEvent).data({"date": new Date()});
            }
        });
    })
</script>

</body>
</html>

<!--helpers:-->
<!--http://stackoverflow.com/questions/5116929/get-clicked-li-from-ul-onclick-->
<!--http://stackoverflow.com/questions/3552461/how-to-format-a-javascript-date-->